# Manifold

### One-command full-stack provisioning inside VS Code Chat

Manifold is a VS Code extension that turns:

`@manifold setup my-app`

into a guided pipeline that checks your machine, validates auth, scaffolds a React + Supabase app, provisions GitHub + Vercel, wires environment variables, and deploys.

---

## What this extension does

- Adds a chat participant: `@manifold`
- Stores run progress in `.manifold.json`
- Runs environment checks for:
  - `git`
  - `node`
  - `python`
  - `gh` (GitHub CLI)
  - `vercel` (Vercel CLI)
  - `supabase` (Supabase CLI)
- Verifies authentication for GitHub, Vercel, and Supabase
- Scaffolds app structure (`frontend` + `supabase/functions`)
- Provisions GitHub repo + Vercel project
- Writes env files (`.env`, `frontend/.env`)
- Deploys frontend to Vercel and backend function to Supabase

---

## Required accounts (must have)

You need these accounts before running setup:

| Account      | Why it is required                              | Minimum needed                                           |
| :----------- | :---------------------------------------------- | :------------------------------------------------------- |
| **GitHub**   | Creates and pushes project repository           | Account with permission to create private repos          |
| **Vercel**   | Creates project, links it, and deploys frontend | Account connected to CLI login                           |
| **Supabase** | Verifies credentials and deploys Edge Function  | Project using either PAT + Project URL + Publishable Key |

Recommended:

- Keep all three accounts under the same email/org context for easier permission handling.

---

## Software to install on your computer

### Core tools

- **Git**
- **Node.js (LTS)** and **npm**
- **Python 3.11+**
- **GitHub CLI** (`gh`)
- **Vercel CLI** (`vercel`)
- **Supabase CLI** (`supabase`, or `npx supabase` fallback)
- **VS Code** (latest stable)

### Windows install commands

```powershell
winget install --id Git.Git -e --accept-package-agreements --accept-source-agreements
winget install --id OpenJS.NodeJS.LTS -e --accept-package-agreements --accept-source-agreements
winget install --id Python.Python.3.11 -e --accept-package-agreements --accept-source-agreements
winget install --id GitHub.cli -e --accept-package-agreements --accept-source-agreements
npm install -g vercel
npm install supabase --save-dev
```

---

## First-time auth setup (one-time)

Run these before using `@manifold`:

```powershell
gh auth login
vercel login
```

For Supabase, use these methods when prompted by Manifold:

1. **Personal Access Token** (`sbp_...`)
2. **Project URL + Publishable API Key** (`https://<ref>.supabase.co` + `sb_publishable_...`)

---

## Startup guide (from zero to running)

### 1) Clone and install extension dependencies

```powershell
git clone <your-fork-or-repo-url>
cd manifold-dev
npm install
npm run compile
```

### 2) Launch extension development host

1. Open this repo in VS Code
2. Press **F5**
3. Choose **Run Manifold Extension**

This opens an **Extension Host** window.

### 3) Trigger setup in chat

In the Extension Host window, open Chat and run:

```text
@manifold setup my-cool-app
```

### 4) Follow prompts until completion

Manifold will:

- Check toolchain
- Verify auth
- Scaffold project
- Provision GitHub + Vercel
- Wire env files
- Deploy

On success, you should get a production URL and logs in `.manifold-logs/`.

---

## Useful commands

- `Manifold: Setup Project` — start setup via command palette
- `Manifold: Reset State` — remove `.manifold.json` and restart flow
- `@manifold setup <project-name>` — chat-driven setup

---

## Output generated by setup

For each created app project, Manifold scaffolds:

- `frontend/` (React + Vite)
- `supabase/functions/api/` (Edge Function)
- `supabase/config.toml`
- `vercel.json`
- `.env` and `frontend/.env`

---

## Troubleshooting quick checks

- `npm run compile` fails → ensure Node LTS and reinstall deps (`npm install`)
- `gh auth status` fails → rerun `gh auth login`
- `vercel whoami` fails → rerun `vercel login`
- Supabase verification fails → confirm PAT/key format and project URL
- Deploy fails → inspect `.manifold-logs/` for build/env/config/network hints

---

## Current status

Prototype extension with end-to-end setup pipeline through deployment. Best used in a clean workspace folder when testing full setup flows.
